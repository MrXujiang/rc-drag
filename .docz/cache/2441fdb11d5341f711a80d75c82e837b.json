{"remainingRequest":"/Users/apple/Documents/zm/rc-drag/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/apple/Documents/zm/rc-drag/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/apple/Documents/zm/rc-drag/node_modules/source-map-loader/index.js!/Users/apple/Documents/zm/rc-drag/src/components/index.tsx","dependencies":[{"path":"/Users/apple/Documents/zm/rc-drag/src/components/index.tsx","mtime":1610679801633},{"path":"/Users/apple/Documents/zm/rc-drag/node_modules/cache-loader/dist/cjs.js","mtime":1606639629879},{"path":"/Users/apple/Documents/zm/rc-drag/node_modules/thread-loader/dist/cjs.js","mtime":1606639601926},{"path":"/Users/apple/Documents/zm/rc-drag/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1608289769558},{"path":"/Users/apple/Documents/zm/rc-drag/node_modules/source-map-loader/index.js","mtime":1608289868913}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FwcGxlL0RvY3VtZW50cy96bS9yYy1kcmFnL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9hcHBsZS9Eb2N1bWVudHMvem0vcmMtZHJhZy9ub2RlX21vZHVsZXMvYmFiZWwtcHJlc2V0LXJlYWN0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CnZhciBfanN4RmlsZU5hbWUgPSAiL1VzZXJzL2FwcGxlL0RvY3VtZW50cy96bS9yYy1kcmFnL3NyYy9jb21wb25lbnRzL2luZGV4LnRzeCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZGVmYXVsdC5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKLyogIHJlYWN0IGRyYWcKLyogIGF1dGhvciA6IHh1eGlhb3hpCi8qICBkYXRlICAgOiAyMDIxLTEtMyAyMDoxMDo0MQovKiAgbGFzdCAgIDogMjAyMS0xLTMgMjA6MTA6NDEKKi8KaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIG1lbW8gfSBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgJy4vaW5kZXgubGVzcyc7CgppZiAodHlwZW9mIElQcm9wcyAhPT0gJ3VuZGVmaW5lZCcgJiYgSVByb3BzICYmIElQcm9wcyA9PT0gT2JqZWN0KElQcm9wcykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShJUHJvcHMpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElQcm9wcywgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIklQcm9wcyIsCiAgICAgIGZpbGVuYW1lOiAic3JjL2NvbXBvbmVudHMvaW5kZXgudHN4IgogICAgfQogIH0pOwp9CgovKioKICog6Ieq55Sx5ouW5ou957uE5Lu2CiAqIEBwYXJhbSB7Y29udGFpbmVyfSDnlLvluIPlhYPntKDmiJbogIXnlLvluINpZAogKiBAcGFyYW0ge3Bvc30g55S75biD5Yid5aeL5YyW5Z2Q5qCHCiAqIEBwYXJhbSB7c2l6ZX0g5YWD57Sg5a696auYCiAqIEBwYXJhbSB7aXNTdGF0aWN9IOaYr+WQpuemgeatouaLluaLvQogKiBAcGFyYW0ge3pJbmRleH0g5bGC57qnCiAqIEBwYXJhbSB7b25EcmFnU3RhcnR9IOm8oOagh+aLluaLveW8gOWniwogKiBAcGFyYW0ge29uRHJhZ1N0b3B9IOm8oOagh+aLluaLvee7k+adnwogKi8KZnVuY3Rpb24gRHJhZyhwcm9wcykgewogIHZhciBfdGhpcyA9IHRoaXM7CgogIHZhciBfcHJvcHMkY29udGFpbmVyID0gcHJvcHMuY29udGFpbmVyLAogICAgICBjb250YWluZXIgPSBfcHJvcHMkY29udGFpbmVyID09PSB2b2lkIDAgPyBkb2N1bWVudC5ib2R5IDogX3Byb3BzJGNvbnRhaW5lciwKICAgICAgX3Byb3BzJHBvcyA9IHByb3BzLnBvcywKICAgICAgcG9zID0gX3Byb3BzJHBvcyA9PT0gdm9pZCAwID8gWzAsIDBdIDogX3Byb3BzJHBvcywKICAgICAgX3Byb3BzJHNpemUgPSBwcm9wcy5zaXplLAogICAgICBzaXplID0gX3Byb3BzJHNpemUgPT09IHZvaWQgMCA/IFsxMDAsIDEwMF0gOiBfcHJvcHMkc2l6ZSwKICAgICAgX3Byb3BzJHpJbmRleCA9IHByb3BzLnpJbmRleCwKICAgICAgekluZGV4ID0gX3Byb3BzJHpJbmRleCA9PT0gdm9pZCAwID8gMSA6IF9wcm9wcyR6SW5kZXgsCiAgICAgIF9wcm9wcyRpc1N0YXRpYyA9IHByb3BzLmlzU3RhdGljLAogICAgICBpc1N0YXRpYyA9IF9wcm9wcyRpc1N0YXRpYyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcHJvcHMkaXNTdGF0aWMsCiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sCiAgICAgIG9uRHJhZ1N0YXJ0ID0gcHJvcHMub25EcmFnU3RhcnQsCiAgICAgIG9uRHJhZ1N0b3AgPSBwcm9wcy5vbkRyYWdTdG9wOwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoewogICAgbGVmdDogcG9zWzBdLAogICAgdG9wOiBwb3NbMV0sCiAgICB3aWR0aDogc2l6ZVswXSwKICAgIGhlaWdodDogc2l6ZVsxXSwKICAgIHpJbmRleDogekluZGV4CiAgfSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzdHlsZSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldFN0eWxlID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIGRyYWdCb3ggPSB1c2VSZWYobnVsbCk7CiAgdmFyIHBvaW50cyA9IFsnZScsICd3JywgJ3MnLCAnbicsICduZScsICdudycsICdzZScsICdzdyddOyAvLyBpbml0IG9yaWdpbiBwb3NpdG9uCgogIHZhciBvcmlQb3MgPSB1c2VSZWYoewogICAgdG9wOiAwLAogICAgLy8gZWxlbWVudCBwb3NpdGlvbgogICAgbGVmdDogMCwKICAgIGNYOiAwLAogICAgLy8gbW91c2UgcG9zaXRpb24KICAgIGNZOiAwCiAgfSk7CiAgdmFyIGlzRG93biA9IHVzZVJlZihmYWxzZSk7CiAgdmFyIGRpcmVjdGlvbiA9IHVzZVJlZigpOyAvLyBtb3VzZWRvd24KCiAgdmFyIF9vbk1vdXNlRG93biA9IGZ1bmN0aW9uIG9uTW91c2VEb3duKGRpciwgZSkgewogICAgLy8gc3RvcCB0aGUgZXZlbnQgYnViYmxlcwogICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gc2V0IGxheWVyIGxldmVsCiAgICAvLyBzZXRTdHlsZShwcmV2ID0+ICh7Li4ucHJldiwgekluZGV4OiA5OTk5fSkpCiAgICAvLyBzYXZlIGRpcmVjdGlvbgoKICAgIGRpcmVjdGlvbi5jdXJyZW50ID0gZGlyOwogICAgaXNEb3duLmN1cnJlbnQgPSB0cnVlOwogICAgdmFyIGNZID0gZS5jbGllbnRZOwogICAgdmFyIGNYID0gZS5jbGllbnRYOwogICAgb3JpUG9zLmN1cnJlbnQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0eWxlKSwge30sIHsKICAgICAgY1g6IGNYLAogICAgICBjWTogY1kKICAgIH0pOwogICAgb25EcmFnU3RhcnQgJiYgb25EcmFnU3RhcnQob3JpUG9zLmN1cnJlbnQpOwogIH07CgogIHZhciBfb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGRpciwgZSkgewogICAgLy8gc3RvcCB0aGUgZXZlbnQgYnViYmxlcwogICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gc2V0IGxheWVyIGxldmVsCiAgICAvLyBzZXRTdHlsZShwcmV2ID0+ICh7Li4ucHJldiwgekluZGV4OiA5OTk5fSkpCiAgICAvLyBzYXZlIGRpcmVjdGlvbgoKICAgIGRpcmVjdGlvbi5jdXJyZW50ID0gZGlyOwogICAgaXNEb3duLmN1cnJlbnQgPSB0cnVlOwogICAgY29uc29sZS5sb2coZS50YXJnZXRUb3VjaGVzWzBdKTsKICAgIHZhciBjWSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWTsKICAgIHZhciBjWCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWDsKICAgIG9yaVBvcy5jdXJyZW50ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdHlsZSksIHt9LCB7CiAgICAgIGNYOiBjWCwKICAgICAgY1k6IGNZCiAgICB9KTsKICAgIG9uRHJhZ1N0YXJ0ICYmIG9uRHJhZ1N0YXJ0KG9yaVBvcy5jdXJyZW50KTsKICB9OwoKICB2YXIgb25Ub3VjaE1vdmUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZSkgewogICAgLy8gc3RvcCB0aGUgZXZlbnQgYnViYmxlcwogICAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gRGV0ZXJtaW5lIGlmIHRoZSBtb3VzZSBpcyBob2xkaW5nIGRvd24KCiAgICBpZiAoIWlzRG93bi5jdXJyZW50KSByZXR1cm47CiAgICB2YXIgeSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWTsKICAgIHZhciB4ID0gZS50YXJnZXRUb3VjaGVzWzBdLnBhZ2VYOwogICAgdmFyIG5ld1N0eWxlID0gdHJhbnNmb3JtKGRpcmVjdGlvbi5jdXJyZW50LCBvcmlQb3MuY3VycmVudCwgewogICAgICB4OiB4LAogICAgICB5OiB5CiAgICB9KTsKICAgIHNldFN0eWxlKG5ld1N0eWxlKTsKICB9LCBbXSk7IC8vIG1vdmUgbW91c2UKCiAgdmFyIG9uTW91c2VNb3ZlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGUpIHsKICAgIC8vIERldGVybWluZSBpZiB0aGUgbW91c2UgaXMgaG9sZGluZyBkb3duCiAgICBpZiAoIWlzRG93bi5jdXJyZW50KSByZXR1cm47CiAgICB2YXIgbmV3U3R5bGUgPSB0cmFuc2Zvcm0oZGlyZWN0aW9uLmN1cnJlbnQsIG9yaVBvcy5jdXJyZW50LCB7CiAgICAgIHg6IGUuY2xpZW50WCwKICAgICAgeTogZS5jbGllbnRZCiAgICB9KTsKICAgIHNldFN0eWxlKG5ld1N0eWxlKTsKICB9LCBbXSk7IC8vIFRoZSBtb3VzZSBpcyBsaWZ0ZWQKCiAgdmFyIG9uTW91c2VVcCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlKSB7CiAgICBpc0Rvd24uY3VycmVudCA9IGZhbHNlOwogICAgb25EcmFnU3RvcCAmJiBvbkRyYWdTdG9wKHN0eWxlKTsKICB9LCBbc3R5bGVdKTsKCiAgdmFyIGdldFRhbkRlZyA9IGZ1bmN0aW9uIGdldFRhbkRlZyh0YW4pIHsKICAgIHZhciByZXN1bHQgPSBNYXRoLmF0YW4odGFuKSAvIChNYXRoLlBJIC8gMTgwKTsKICAgIHJlc3VsdCA9IE1hdGgucm91bmQocmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgZnVuY3Rpb24gdHJhbnNmb3JtKGRpcmVjdGlvbiwgb3JpUG9zLCBwb3MpIHsKICAgIHZhciBfZHJhZ0JveCRjdXJyZW50LCBfZHJhZ0JveCRjdXJyZW50MjsKCiAgICB2YXIgc3R5bGUgPSBfb2JqZWN0U3ByZWFkKHt9LCBvcmlQb3MpOwoKICAgIHZhciBvZmZzZXRYID0gcG9zLnggLSBvcmlQb3MuY1g7CiAgICB2YXIgb2Zmc2V0WSA9IHBvcy55IC0gb3JpUG9zLmNZOwoKICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7CiAgICAgIC8vIG1vdmUKICAgICAgY2FzZSAnbW92ZSc6CiAgICAgICAgLy8gZWxlbWVudCBwb3NpdGlvbiBhbmQgb2Zmc2V0CiAgICAgICAgdmFyIHRvcCA9IG9yaVBvcy50b3AgKyBvZmZzZXRZOwogICAgICAgIHZhciBsZWZ0ID0gb3JpUG9zLmxlZnQgKyBvZmZzZXRYOwogICAgICAgIHZhciB3aWR0aCA9ICgoX2RyYWdCb3gkY3VycmVudCA9IGRyYWdCb3guY3VycmVudCkgPT09IG51bGwgfHwgX2RyYWdCb3gkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RyYWdCb3gkY3VycmVudC5vZmZzZXRXaWR0aCkgfHwgMDsKICAgICAgICB2YXIgaGVpZ2h0ID0gKChfZHJhZ0JveCRjdXJyZW50MiA9IGRyYWdCb3guY3VycmVudCkgPT09IG51bGwgfHwgX2RyYWdCb3gkY3VycmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kcmFnQm94JGN1cnJlbnQyLm9mZnNldEhlaWdodCkgfHwgMDsgLy8gTGltaXQgdGhlIGhlaWdodCBvZiB0aGUgYXJ0Ym9hcmQgLSB0aGUgaGVpZ2h0IG9mIHRoZSBlbGVtZW50IC0gdGhhdCBtdXN0IGJlIG1vdmVkIHdpdGhpbiB0aGlzIHJhbmdlCgogICAgICAgIHN0eWxlLnRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRvcCwgaGVpZ2h0IC0gc3R5bGUuaGVpZ2h0KSk7CiAgICAgICAgc3R5bGUubGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGxlZnQsIHdpZHRoIC0gc3R5bGUud2lkdGgpKTsKICAgICAgICBicmVhazsKICAgICAgLy8gZWFzdAoKICAgICAgY2FzZSAnZSc6CiAgICAgICAgLy8gRHJhZyB0byB0aGUgcmlnaHQgdG8gYWRkIHdpZHRoCiAgICAgICAgc3R5bGUud2lkdGggKz0gb2Zmc2V0WDsKICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgIC8vIHdlc3QKCiAgICAgIGNhc2UgJ3cnOgogICAgICAgIC8vIEluY3JlYXNlIHRoZSB3aWR0aCwgcG9zaXRpb24gc3luY2hyb25pemF0aW9uIGxlZnQgc2hpZnQKICAgICAgICBzdHlsZS53aWR0aCAtPSBvZmZzZXRYOwogICAgICAgIHN0eWxlLmxlZnQgKz0gb2Zmc2V0WDsKICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgIC8vIHNvdXRoCgogICAgICBjYXNlICdzJzoKICAgICAgICBzdHlsZS5oZWlnaHQgKz0gb2Zmc2V0WTsKICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgIC8vIG5vcnRoCgogICAgICBjYXNlICduJzoKICAgICAgICBzdHlsZS5oZWlnaHQgLT0gb2Zmc2V0WTsKICAgICAgICBzdHlsZS50b3AgKz0gb2Zmc2V0WTsKICAgICAgICBicmVhazsKICAgICAgLy8gbm9ydGhlYXN0CgogICAgICBjYXNlICduZSc6CiAgICAgICAgc3R5bGUuaGVpZ2h0IC09IG9mZnNldFk7CiAgICAgICAgc3R5bGUudG9wICs9IG9mZnNldFk7CiAgICAgICAgc3R5bGUud2lkdGggKz0gb2Zmc2V0WDsKICAgICAgICBicmVhazsKICAgICAgLy8gbm9ydGh3ZXN0CgogICAgICBjYXNlICdudyc6CiAgICAgICAgc3R5bGUuaGVpZ2h0IC09IG9mZnNldFk7CiAgICAgICAgc3R5bGUudG9wICs9IG9mZnNldFk7CiAgICAgICAgc3R5bGUud2lkdGggLT0gb2Zmc2V0WDsKICAgICAgICBzdHlsZS5sZWZ0ICs9IG9mZnNldFg7CiAgICAgICAgYnJlYWs7CiAgICAgIC8vIHNvdXRoZWFzdAoKICAgICAgY2FzZSAnc2UnOgogICAgICAgIHN0eWxlLmhlaWdodCArPSBvZmZzZXRZOwogICAgICAgIHN0eWxlLndpZHRoICs9IG9mZnNldFg7CiAgICAgICAgYnJlYWs7CiAgICAgIC8vIHNvdXRod2VzdAoKICAgICAgY2FzZSAnc3cnOgogICAgICAgIHN0eWxlLmhlaWdodCArPSBvZmZzZXRZOwogICAgICAgIHN0eWxlLndpZHRoIC09IG9mZnNldFg7CiAgICAgICAgc3R5bGUubGVmdCArPSBvZmZzZXRYOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAncm90YXRlJzoKICAgICAgICAvLyBUaGUgY2VudGVyIHBvaW50IG9mIHRoZSBlbGVtZW50LCB4LCB5LCBpcyBjYWxjdWxhdGVkIGFzIHRoZSBjb29yZGluYXRlIG9yaWdpbiBmaXJzdAogICAgICAgIHZhciB4ID0gc3R5bGUud2lkdGggLyAyICsgc3R5bGUubGVmdDsKICAgICAgICB2YXIgeSA9IHN0eWxlLmhlaWdodCAvIDIgKyBzdHlsZS50b3A7IC8vIFRoZSBjdXJyZW50IG1vdXNlIGNvb3JkaW5hdGVzCgogICAgICAgIHZhciB4MSA9IHBvcy54OwogICAgICAgIHZhciB5MSA9IHBvcy55OyAvLyBVc2luZyB0cmlhbmd1bGFyIGZ1bmN0aW9ucywgdGhlcmUgYXJlIGJ1Z3MgdG8gb3B0aW1pemUKCiAgICAgICAgc3R5bGUudHJhbnNmb3JtID0gInJvdGF0ZSgiLmNvbmNhdChnZXRUYW5EZWcoKHkxIC0geSkgLyAoeDEgLSB4KSksICJkZWcpIik7CiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIHN0eWxlOwogIH0KCiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGRyYWdCb3guY3VycmVudCA9IHR5cGVvZiBjb250YWluZXIgPT09ICdvYmplY3QnID8gY29udGFpbmVyIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpOwoKICAgIGlmIChbJ3JlbGF0aXZlJywgJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihkcmFnQm94LmN1cnJlbnQuc3R5bGUucG9zaXRpb24pIDwgMCkgewogICAgICBkcmFnQm94LmN1cnJlbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnOwogICAgfQogIH0sIFtdKTsKICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIGNsYXNzTmFtZTogImRyYWctaXRlbS13cmFwIiwKICAgIF9fc2VsZjogdGhpcywKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIzMiwKICAgICAgY29sdW1uTnVtYmVyOiAxMAogICAgfQogIH0sIGlzU3RhdGljID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIGNsYXNzTmFtZTogIngtZHJhZy1pdGVtIiwKICAgIHN0eWxlOiBzdHlsZSwKICAgIF9fc2VsZjogdGhpcywKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDIzNCwKICAgICAgY29sdW1uTnVtYmVyOiAxOAogICAgfQogIH0sIGNoaWxkcmVuKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJ4LWRyYWctaXRlbSIsCiAgICBzdHlsZTogc3R5bGUsCiAgICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oZSkgewogICAgICByZXR1cm4gX29uTW91c2VEb3duKCdtb3ZlJywgZSk7CiAgICB9LAogICAgb25Nb3VzZVVwOiBvbk1vdXNlVXAsCiAgICBvbk1vdXNlTW92ZTogb25Nb3VzZU1vdmUsCiAgICBvblRvdWNoU3RhcnQ6IGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7CiAgICAgIHJldHVybiBfb25Ub3VjaFN0YXJ0KCdtb3ZlJywgZSk7CiAgICB9LAogICAgb25Ub3VjaE1vdmU6IG9uVG91Y2hNb3ZlLAogICAgb25Ub3VjaEVuZDogb25Nb3VzZVVwLAogICAgX19zZWxmOiB0aGlzLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjM2LAogICAgICBjb2x1bW5OdW1iZXI6IDkKICAgIH0KICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiAieC1kcmFnLWl0ZW0tY2hpbGQiLAogICAgX19zZWxmOiB0aGlzLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMjQ2LAogICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICB9CiAgfSwgY2hpbGRyZW4pLCAhaXNTdGF0aWMgJiYgcG9pbnRzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGNsYXNzTmFtZTogY2xhc3NuYW1lcygnY29udHJvbC1wb2ludCcsICJwb2ludC0iLmNvbmNhdChpdGVtKSksCiAgICAgIGtleTogaXRlbSwKICAgICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIG9uTW91c2VEb3duKGUpIHsKICAgICAgICByZXR1cm4gX29uTW91c2VEb3duKGl0ZW0sIGUpOwogICAgICB9LAogICAgICBvblRvdWNoU3RhcnQ6IGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7CiAgICAgICAgcmV0dXJuIF9vblRvdWNoU3RhcnQoaXRlbSwgZSk7CiAgICAgIH0sCiAgICAgIF9fc2VsZjogX3RoaXMsCiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiAyNTAsCiAgICAgICAgY29sdW1uTnVtYmVyOiAxNwogICAgICB9CiAgICB9KTsKICB9KSkpOwp9CgpfX3NpZ25hdHVyZV9fKERyYWcsICJ1c2VTdGF0ZXtbc3R5bGUsIHNldFN0eWxlXSh7XG4gICAgbGVmdDogcG9zWzBdLFxuICAgIHRvcDogcG9zWzFdLFxuICAgIHdpZHRoOiBzaXplWzBdLFxuICAgIGhlaWdodDogc2l6ZVsxXSxcbiAgICB6SW5kZXhcbiAgfSl9XG51c2VSZWZ7ZHJhZ0JveH1cbnVzZVJlZntvcmlQb3N9XG51c2VSZWZ7aXNEb3dufVxudXNlUmVme2RpcmVjdGlvbn1cbnVzZUNhbGxiYWNre29uVG91Y2hNb3ZlfVxudXNlQ2FsbGJhY2t7b25Nb3VzZU1vdmV9XG51c2VDYWxsYmFja3tvbk1vdXNlVXB9XG51c2VFZmZlY3R7fSIpOwoKdmFyIF9kZWZhdWx0ID0gbWVtbyhEcmFnKTsKCmV4cG9ydCBkZWZhdWx0IF9kZWZhdWx0Owo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihEcmFnLCAiRHJhZyIsICIvVXNlcnMvYXBwbGUvRG9jdW1lbnRzL3ptL3JjLWRyYWcvc3JjL2NvbXBvbmVudHMvaW5kZXgudHN4Iik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoX2RlZmF1bHQsICJkZWZhdWx0IiwgIi9Vc2Vycy9hcHBsZS9Eb2N1bWVudHMvem0vcmMtZHJhZy9zcmMvY29tcG9uZW50cy9pbmRleC50c3giKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmxlYXZlTW9kdWxlIDogdW5kZWZpbmVkOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["/Users/apple/Documents/zm/rc-drag/src/components/index.tsx"],"names":["React","useState","useRef","useEffect","useCallback","memo","classnames","Drag","props","container","document","body","pos","size","zIndex","isStatic","children","onDragStart","onDragStop","left","top","width","height","style","setStyle","dragBox","points","oriPos","cX","cY","isDown","direction","onMouseDown","dir","e","stopPropagation","current","clientY","clientX","onTouchStart","console","log","targetTouches","pageY","pageX","onTouchMove","y","x","newStyle","transform","onMouseMove","onMouseUp","getTanDeg","tan","result","Math","atan","PI","round","offsetX","offsetY","offsetWidth","offsetHeight","max","min","x1","y1","querySelector","indexOf","position","map","item"],"mappings":"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","sourcesContent":["/*  react drag\n/*  author : xuxiaoxi\n/*  date   : 2021-1-3 20:10:41\n/*  last   : 2021-1-3 20:10:41\n*/\n\nimport React, { ReactNode, useState, useRef, useEffect, useCallback, memo } from 'react'\nimport classnames from 'classnames'\nimport './index.less'\n\nexport interface IProps {\n  container: HTMLElement | string;\n  isStatic: boolean;\n  pos: [number, number];\n  size: [number, number];\n  zIndex: number;\n  children: ReactNode;\n  onDragStart: (params) => void;\n  onDragStop: (params) => void;\n}\n\ninterface OriPos {\n  left: number;\n  top: number;\n  cX: number;\n  cY: number;\n  [name:string]: any;\n}\n\ntype PosMap = 'e' | 'w' | 's' | 'n' | 'ne' | 'nw' | 'se' | 'sw' | 'move' | 'rotate' | undefined;\n\n\n/**\n * 自由拖拽组件\n * @param {container} 画布元素或者画布id\n * @param {pos} 画布初始化坐标\n * @param {size} 元素宽高\n * @param {isStatic} 是否禁止拖拽\n * @param {zIndex} 层级\n * @param {onDragStart} 鼠标拖拽开始\n * @param {onDragStop} 鼠标拖拽结束\n */\nfunction Drag(props:IProps) {\n  const {\n    container = document.body,\n    pos = [0,0],\n    size = [100, 100],\n    zIndex = 1,\n    isStatic = false,\n    children,\n    onDragStart,\n    onDragStop\n  } = props\n\n  const [style, setStyle] = useState({\n    left: pos[0],\n    top: pos[1],\n    width: size[0],\n    height: size[1],\n    zIndex\n  })\n\n  const dragBox = useRef<HTMLElement | null>(null);\n  const points = ['e', 'w', 's', 'n', 'ne', 'nw', 'se', 'sw']\n\n  // init origin positon\n  const oriPos = useRef<OriPos>({\n    top: 0, // element position\n    left: 0,\n    cX: 0, // mouse position\n    cY: 0,\n  })\n  const isDown = useRef(false)\n  const direction = useRef<PosMap>()\n\n  // mousedown\n  const onMouseDown = (dir:PosMap, e:React.MouseEvent<HTMLElement>) => {\n    // stop the event bubbles\n    e.stopPropagation();\n    // set layer level\n    // setStyle(prev => ({...prev, zIndex: 9999}))\n\n    // save direction\n    direction.current = dir;\n    isDown.current = true;\n\n    const cY = e.clientY;\n    const cX = e.clientX;\n    oriPos.current = {\n      ...style,\n      cX, cY\n    }\n    onDragStart && onDragStart(oriPos.current)\n  }\n\n  const onTouchStart = (dir:PosMap, e:React.TouchEvent<HTMLElement>) => {\n    // stop the event bubbles\n    e.stopPropagation();\n    // set layer level\n    // setStyle(prev => ({...prev, zIndex: 9999}))\n\n    // save direction\n    direction.current = dir;\n    isDown.current = true;\n\n    console.log(e.targetTouches[0])\n\n    const cY = e.targetTouches[0].pageY;\n    const cX = e.targetTouches[0].pageX;\n    oriPos.current = {\n      ...style,\n      cX, cY\n    }\n    onDragStart && onDragStart(oriPos.current)\n  }\n\n  const onTouchMove = useCallback((e:React.TouchEvent<HTMLElement>) => {\n    // stop the event bubbles\n    e.stopPropagation();\n\n    // Determine if the mouse is holding down\n    if (!isDown.current) return\n\n    const y = e.targetTouches[0].pageY;\n    const x = e.targetTouches[0].pageX;\n    let newStyle = transform(direction.current, oriPos.current, {x, y});\n    setStyle(newStyle as any)\n  }, [])\n\n  // move mouse\n  const onMouseMove = useCallback((e) => {\n    // Determine if the mouse is holding down\n    if (!isDown.current) return\n    let newStyle = transform(direction.current, oriPos.current, {x:e.clientX, y: e.clientY});\n    setStyle(newStyle as any)\n  }, [])\n\n  // The mouse is lifted\n  const onMouseUp = useCallback((e) => {\n    isDown.current = false;\n    onDragStop && onDragStop(style)\n  }, [style])\n\n  const getTanDeg = (tan:number) => {\n    var result = Math.atan(tan) / (Math.PI / 180);\n    result = Math.round(result);\n    return result;\n  }\n\n  function transform(direction: PosMap, oriPos:OriPos, pos:{x:number, y: number}) {\n    const style = {...oriPos}\n    const offsetX = pos.x - oriPos.cX;\n    const offsetY = pos.y - oriPos.cY;\n\n    switch (direction) {\n      // move\n      case 'move' :\n          // element position and offset\n          const top = oriPos.top + offsetY;\n          const left = oriPos.left + offsetX;\n          const width = dragBox.current?.offsetWidth || 0;\n          const height = dragBox.current?.offsetHeight || 0;\n          // Limit the height of the artboard - the height of the element - that must be moved within this range\n          style.top = Math.max(0, Math.min(top, height - style.height));\n          style.left = Math.max(0, Math.min(left, width - style.width));\n          break\n      // east\n      case 'e':\n          // Drag to the right to add width\n          style.width += offsetX;\n          return style\n      // west\n      case 'w':\n        // Increase the width, position synchronization left shift\n        style.width -= offsetX;\n        style.left += offsetX;\n        return style\n      // south\n      case 's':\n          style.height += offsetY;\n          return style\n      // north\n      case 'n':\n          style.height -= offsetY;\n          style.top += offsetY;\n          break\n      // northeast\n      case 'ne':\n          style.height -= offsetY;\n          style.top += offsetY;\n          style.width += offsetX;\n          break\n      // northwest\n      case 'nw':\n          style.height -= offsetY;\n          style.top += offsetY;\n          style.width -= offsetX;\n          style.left += offsetX; \n          break\n      // southeast\n      case 'se':\n          style.height += offsetY;\n          style.width += offsetX;\n          break\n      // southwest\n      case 'sw':\n          style.height += offsetY;\n          style.width -= offsetX;\n          style.left += offsetX;\n          break\n      case 'rotate':\n        // The center point of the element, x, y, is calculated as the coordinate origin first\n        const x = style.width / 2 + style.left;\n        const y = style.height / 2 + style.top;\n        // The current mouse coordinates\n        const x1 = pos.x;\n        const y1 = pos.y;\n        // Using triangular functions, there are bugs to optimize\n        style.transform = `rotate(${getTanDeg((y1 - y) / (x1 - x))}deg)`;\n        break\n    }\n    return style\n  }\n\n  useEffect(() => {\n    dragBox.current = (typeof container === 'object' ? container : document.querySelector(container)) as HTMLElement;\n    if(['relative', 'absolute', 'fixed'].indexOf(dragBox.current.style.position) < 0) {\n      dragBox.current.style.position = 'relative';\n    }\n  }, [])\n  \n  return <div className=\"drag-item-wrap\">\n    {\n      isStatic ? <div className=\"x-drag-item\" style={style}>{ children }</div>\n        :\n        <div \n          className=\"x-drag-item\" \n          style={style} \n          onMouseDown={(e) => onMouseDown('move', e)} \n          onMouseUp={onMouseUp} \n          onMouseMove={onMouseMove} \n          onTouchStart={(e) => onTouchStart('move', e)}\n          onTouchMove={onTouchMove}\n          onTouchEnd={onMouseUp}\n        >\n          <div className=\"x-drag-item-child\">{ children }</div>\n          {\n            !isStatic && \n              points.map(item => \n                <div \n                  className={classnames('control-point', `point-${item}`)} \n                  key={item} \n                  onMouseDown={(e:React.MouseEvent<HTMLElement>) => onMouseDown(item as PosMap, e)}\n                  onTouchStart={(e:React.TouchEvent<HTMLElement>) => onTouchStart(item as PosMap, e)}\n                  >\n\n                </div>\n              )\n          }\n        </div>\n    }\n  </div>\n}\n\nexport default memo(Drag)\n\n"]}]}